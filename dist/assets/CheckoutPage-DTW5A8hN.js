import{i as e,n as t,o as n,s as r}from"./index-Dl_z27bg.js";var i=r(n(),1),a=r(t(),1);function o(){let[t,n]=(0,i.useState)([]),r=e();(0,i.useEffect)(()=>{try{let e=localStorage.getItem(`nutriflex_cart_items`),t=e?JSON.parse(e):[];n(Array.isArray(t)?t:[])}catch{n([])}},[]);let o=(0,i.useMemo)(()=>{let e={};for(let n of t){let t=n.id??n.name??n.title;e[t]||(e[t]={...n,qty:0}),e[t].qty+=1}return Object.values(e)},[t]),s=(0,i.useMemo)(()=>o.reduce((e,t)=>e+(t.price??0)*t.qty,0),[o]),c=(0,i.useMemo)(()=>s<=0||s>=45.99?0:45.99,[s]),l=(0,i.useMemo)(()=>s+c,[s,c]),u=e=>{localStorage.setItem(`nutriflex_cart_items`,JSON.stringify(e)),n(e)},d=e=>{let n=t.find(t=>(t.id??t.name??t.title)===e);n&&u([n,...t])},f=e=>{let n=t.findIndex(t=>(t.id??t.name??t.title)===e);if(n===-1)return;let r=[...t];r.splice(n,1),u(r)},p=e=>u(t.filter(t=>(t.id??t.name??t.title)!==e));return(0,a.jsxs)(`div`,{className:`mx-auto max-w-5xl px-3 sm:px-4 py-4 sm:py-8`,children:[(0,a.jsx)(`h1`,{className:`text-2xl font-semibold mb-6`,children:`Meu carrinho `}),t.length===0?(0,a.jsxs)(`div`,{className:`flex flex-col items-center gap-3`,children:[(0,a.jsx)(`p`,{className:`text-neutral-700`,children:`Seu carrinho está vazio.`}),(0,a.jsx)(`button`,{className:` border border-neutral-400 rounded-md bg-[#2e7d32] hover:bg-[#276628] text-white px-4 py-2 font-semibold`,onClick:()=>r(`/`),children:`Voltar para a loja`})]}):(0,a.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4`,children:[(0,a.jsxs)(`div`,{className:`lg:col-span-2`,children:[(0,a.jsxs)(`div`,{className:`rounded-md border border-neutral-200 bg-white`,children:[(0,a.jsx)(`div`,{className:`px-3 py-3 sm:p-4 border-b border-neutral-200 font-medium`,children:`Itens`}),(0,a.jsxs)(`div`,{className:`hidden md:grid grid-cols-12 px-3 sm:px-4 py-2 text-xs sm:text-sm text-neutral-600 border-b border-neutral-200`,children:[(0,a.jsx)(`div`,{className:`col-span-2 text-center`,children:`Preço`}),(0,a.jsx)(`div`,{className:`col-span-2 text-center`,children:`Quantidade`}),(0,a.jsx)(`div`,{className:`col-span-2 text-right`,children:`Total`})]}),(0,a.jsx)(`ul`,{className:`list-none m-0 p-0 divide-y divide-neutral-200`,children:o.map(e=>{let t=e.id??e.name??e.title,n=(e.price??0)*e.qty,r=Array.isArray(e.images)&&e.images[0]||e.image;return(0,a.jsxs)(`li`,{className:`rounded-md border border-neutral-200 bg-white p-3 sm:p-4`,children:[(0,a.jsxs)(`div`,{className:`flex items-center gap-3 sm:gap-4`,children:[r?(0,a.jsx)(`img`,{src:r,alt:e.name??e.title??`Produto`,className:`h-14 w-14 sm:h-16 sm:w-16 object-contain`}):(0,a.jsx)(`div`,{className:`h-14 w-14 sm:h-16 sm:w-16 rounded bg-neutral-100`,"aria-hidden":`true`}),(0,a.jsxs)(`div`,{className:`flex-1`,children:[(0,a.jsx)(`div`,{className:`font-semibold text-sm sm:text-base`,children:e.name??e.title??`Produto`}),(0,a.jsx)(`div`,{className:`text-[11px] sm:text-xs text-green-700`,children:`Em estoque. Envio imediato`}),(0,a.jsx)(`button`,{"aria-label":`Remover item`,className:`mt-1 inline-flex items-center rounded border border-neutral-300 bg-neutral-100 px-2 py-1 text-[11px] sm:text-xs text-neutral-700`,onClick:()=>p(t),children:`Remover`})]})]}),(0,a.jsxs)(`div`,{className:`mt-3 grid grid-cols-12 text-[11px] sm:text-xs bg-neutral-100 rounded`,children:[(0,a.jsx)(`div`,{className:`col-span-4 py-2 px-3 text-center font-medium`,children:`Preço`}),(0,a.jsx)(`div`,{className:`col-span-4 py-2 px-3 text-center font-medium`,children:`Quantidade`}),(0,a.jsx)(`div`,{className:`col-span-4 py-2 px-3 text-center font-medium`,children:`Total`})]}),(0,a.jsxs)(`div`,{className:`grid grid-cols-12 items-center gap-2 sm:gap-3 mt-1`,children:[(0,a.jsx)(`div`,{className:`col-span-4`,children:(0,a.jsxs)(`div`,{className:`text-left`,children:[`Produto:`,e.realPrice&&e.realPrice>(e.price??0)&&(0,a.jsxs)(`div`,{className:`text-neutral-500 line-through`,children:[`R$ `,Number(e.realPrice).toFixed(2)]}),(0,a.jsxs)(`div`,{className:e.realPrice&&e.realPrice>(e.price??0)?`text-green-700 font-semibold`:`text-neutral-800 font-semibold`,children:[`R$ `,Number(e.price??0).toFixed(2)]})]})}),(0,a.jsx)(`div`,{className:`col-span-4 flex items-center justify-center`,children:(0,a.jsxs)(`div`,{className:` inline-flex items-center rounded-md overflow-hidden`,role:`group`,"aria-label":`Alterar quantidade`,children:[(0,a.jsx)(`button`,{className:`h-8 w-8 bg-neutral-200  rounded-sm border border-neutral-300`,onClick:()=>f(t),"aria-label":`Diminuir`,children:`-`}),(0,a.jsx)(`span`,{className:`h-10 w-8 bg-white  border-neutral-300 flex items-center justify-center`,children:e.qty}),(0,a.jsx)(`button`,{className:`h-8 w-8 bg-neutral-800 rounded-sm text-white border border-neutral-300`,onClick:()=>d(t),"aria-label":`Aumentar`,children:`+`})]})}),(0,a.jsxs)(`div`,{className:`col-span-4 text-right text-green-700 font-semibold`,children:[`R$ `,n.toFixed(2)]})]})]},t)})})]}),(0,a.jsxs)(`div`,{className:`mt-4 rounded-md border border-neutral-200 bg-white p-4`,children:[(0,a.jsx)(`div`,{className:`font-medium mb-2`,children:`Entrega`}),(0,a.jsxs)(`div`,{className:`flex gap-2`,children:[(0,a.jsx)(`input`,{className:`flex-1 rounded-md border border-neutral-300 p-2`,placeholder:`Digite seu CEP`}),(0,a.jsx)(`button`,{className:`rounded-md bg-neutral-900 text-white px-4 py-2`,children:`Calcular`})]}),(0,a.jsx)(`div`,{className:`mt-2 text-sm text-green-700`,children:`Saiba se você tem Frete Grátis`}),(0,a.jsxs)(`div`,{className:`mt-3`,children:[(0,a.jsx)(`div`,{className:`font-medium mb-1`,children:`Aplicar código de cupom`}),(0,a.jsxs)(`div`,{className:`flex gap-2`,children:[(0,a.jsx)(`input`,{className:`flex-1 rounded-md border border-neutral-300 p-2`,placeholder:`Digite o cupom`}),(0,a.jsx)(`button`,{className:`rounded-md border border-neutral-300 bg-neutral-100 px-4 py-2`,children:`Aplicar`})]})]})]})]}),(0,a.jsx)(`div`,{children:(0,a.jsxs)(`section`,{className:`border border-neutral-200 rounded-md bg-white`,children:[(0,a.jsx)(`div`,{className:`p-4 border-b border-neutral-200 font-medium`,children:`Resumo do pedido`}),(0,a.jsxs)(`div`,{className:`p-4 flex items-center justify-between border-b border-neutral-200`,children:[(0,a.jsx)(`span`,{className:`text-neutral-700`,children:`Subtotal`}),(0,a.jsxs)(`span`,{className:`text-neutral-700`,children:[`R$ `,s.toFixed(2)]})]}),(0,a.jsxs)(`div`,{className:`p-4 flex items-center justify-between border-b border-neutral-200`,children:[(0,a.jsx)(`span`,{className:`text-neutral-700`,children:`Entrega`}),(0,a.jsxs)(`span`,{className:`text-neutral-700`,children:[`R$ `,c.toFixed(2)]})]}),(0,a.jsxs)(`div`,{className:`p-4 flex items-center justify-between`,children:[(0,a.jsx)(`span`,{className:`text-neutral-700`,children:`Total`}),(0,a.jsxs)(`span`,{className:`text-xl font-semibold text-green-700`,children:[`R$ `,l.toFixed(2)]})]}),(0,a.jsxs)(`div`,{className:`px-4 pb-4 text-sm`,children:[(0,a.jsxs)(`div`,{children:[(0,a.jsxs)(`span`,{className:`line-through text-neutral-500`,children:[`R$ `,s.toFixed(2)]}),(0,a.jsxs)(`span`,{className:`ml-2 text-green-700 font-semibold`,children:[`R$ `,(s*.8).toFixed(2)]})]}),(0,a.jsx)(`div`,{className:`text-green-700`,children:`*Valor com 20% de desconto no boleto ou PIX.`})]}),(0,a.jsxs)(`div`,{className:`px-4 pb-4 grid gap-2`,children:[(0,a.jsx)(`button`,{className:`  border border-[#2e7d32] rounded-md bg-[#2e7d32] hover:bg-[#276628] text-white py-2 px-4 font-semibold`,onClick:()=>r(`/payment`),children:`FINALIZAR COMPRA`}),(0,a.jsx)(`span`,{className:`text-neutral-500-semibold flex justify-center`,children:`ou`}),(0,a.jsx)(`button`,{className:` rounded-md border-2 border-neutral-100 bg-neutral-100 text-neutral-900 py-2 px-4 font-semibold`,onClick:()=>r(`/`),children:`Adicionar mais produtos`})]})]})})]})]})}export{o as default};