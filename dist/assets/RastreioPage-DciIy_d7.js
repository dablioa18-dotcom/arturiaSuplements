import{n as e,o as t,s as n}from"./index-Dl_z27bg.js";var r=n(t(),1),i=n(e(),1);function a(){let[e,t]=(0,r.useState)(``),[n,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(``),[c,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(``);(0,r.useEffect)(()=>{try{let e=localStorage.getItem(`nutriflex_last_tracking_code`),t=localStorage.getItem(`nutriflex_tracking_created_at`);e&&s(e),t&&l(Number(t));let n=localStorage.getItem(`nutriflex_customer_email`);n&&p(n)}catch{}},[]);let m=(0,r.useMemo)(()=>c?Date.now()-c:0,[c]),h=(0,r.useMemo)(()=>{let e=m/36e5;return[{label:`Pedido recebido`,done:e>=0},{label:`Pagamento confirmado`,done:e>=.25},{label:`Em preparaÃ§Ã£o`,done:e>=2},{label:`Enviado`,done:e>=12},{label:`Em trÃ¢nsito`,done:e>=48},{label:`Saiu para entrega`,done:e>=72},{label:`Entregue`,done:e>=96}]},[m]),g=(0,r.useMemo)(()=>{let e=h.length,t=h.filter(e=>e.done).length;return Math.round(t/e*100)},[h]),_=t=>{t.preventDefault(),a(!0),f&&e.trim()&&f.trim().toLowerCase()!==e.trim().toLowerCase()&&s(``)},v=async()=>{if(o)try{await navigator.clipboard.writeText(o),d(!0),setTimeout(()=>d(!1),3e3)}catch{}};return(0,i.jsxs)(`div`,{className:`mx-auto max-w-5xl px-3 sm:px-4 py-6`,children:[(0,i.jsx)(`h1`,{className:`text-2xl font-semibold mb-4`,children:`Rastreio de Pedido`}),(0,i.jsx)(`p`,{className:`text-neutral-700 mb-4`,children:`Informe seu e-mail para visualizar o progresso do seu pedido.`}),(0,i.jsxs)(`form`,{onSubmit:_,className:`rounded-md border border-neutral-200 bg-white p-4 flex items-center gap-3`,"aria-label":`Consultar rastreio por e-mail`,children:[(0,i.jsx)(`input`,{type:`email`,required:!0,placeholder:`seuemail@exemplo.com`,className:`flex-1 rounded border border-neutral-300 p-2`,value:e,onChange:e=>t(e.target.value)}),(0,i.jsx)(`button`,{type:`submit`,className:`rounded-md bg-green-600 hover:bg-green-700 text-white px-4 py-2 font-semibold`,children:`Consultar`})]}),n&&(0,i.jsxs)(`div`,{className:`mt-6 space-y-4`,children:[o?(0,i.jsx)(`section`,{className:`rounded-md border-2 border-yellow-400 bg-yellow-50 px-4 py-3`,"aria-live":`polite`,"aria-atomic":`true`,children:(0,i.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,i.jsx)(`div`,{className:`text-yellow-600 text-2xl`,"aria-hidden":`true`,children:`ðŸ“¦`}),(0,i.jsxs)(`div`,{className:`flex-1`,children:[(0,i.jsx)(`div`,{className:`text-neutral-900 font-semibold`,children:`CÃ³digo de rastreio`}),(0,i.jsx)(`div`,{className:`mt-1`,children:(0,i.jsx)(`span`,{className:`inline-block font-mono text-lg tracking-widest bg-white text-neutral-900 px-3 py-1 rounded border border-yellow-300 select-all`,children:o})}),(0,i.jsxs)(`div`,{className:`mt-2 flex items-center gap-2`,children:[(0,i.jsxs)(`button`,{className:`inline-flex items-center gap-2 rounded-md bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-green-600`,onClick:v,children:[(0,i.jsx)(`span`,{"aria-hidden":`true`,children:`ðŸ“‹`}),`Copiar cÃ³digo`]}),u&&(0,i.jsx)(`span`,{className:`text-green-700 text-sm`,children:`Copiado!`})]})]})]})}):(0,i.jsx)(`div`,{className:`rounded-md border border-red-300 bg-red-50 px-4 py-3 text-red-700`,children:`Nenhum pedido encontrado para este e-mail neste dispositivo.`}),o&&(0,i.jsxs)(`section`,{className:`rounded-md border border-neutral-200 bg-white p-4`,children:[(0,i.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,i.jsx)(`span`,{className:`text-neutral-700`,children:`Progresso`}),(0,i.jsxs)(`span`,{className:`text-neutral-900 font-medium`,children:[g,`%`]})]}),(0,i.jsx)(`div`,{className:`mt-2 h-2 w-full bg-neutral-200 rounded`,children:(0,i.jsx)(`div`,{className:`h-2 bg-green-600 rounded`,style:{width:`${g}%`}})}),(0,i.jsx)(`ul`,{className:`mt-4 space-y-2`,children:h.map((e,t)=>(0,i.jsxs)(`li`,{className:`flex items-center gap-2`,children:[(0,i.jsx)(`span`,{className:`inline-flex h-5 w-5 items-center justify-center rounded-full border ${e.done?`bg-green-600 border-green-600 text-white`:`bg-white border-neutral-300 text-neutral-500`}`,children:e.done?`âœ“`:t+1}),(0,i.jsx)(`span`,{className:e.done?`text-neutral-900`:`text-neutral-600`,children:e.label})]},t))}),c&&(0,i.jsxs)(`div`,{className:`mt-3 text-sm text-neutral-600`,children:[`Atualizado: `,new Date(c).toLocaleString()]})]})]})]})}export{a as default};